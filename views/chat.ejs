<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Chat</title>
    <link rel="stylesheet" href="/assets/css/chat.css" />
  </head>
  <body>
    <div id="chat-messages"></div>

    <form id="chat-form">
      <input type="text" id="message-input" placeholder="Type your message" />
      <button type="submit">Send</button>
    </form>

    <script src="/socket.io/socket.io.js"></script>
    <script>
      const socket = io();
      const chatMessages = document.querySelector('#chat-messages');
      const chatForm = document.querySelector('#chat-form');
      const messageInput = document.querySelector('#message-input');

      // Join the chat room
      socket.emit('join_room', { chatRoom: 'your_chat_room_id' });

      // Receive new message
      socket.on('receive_message', function (data) {
        const newMessage = document.createElement('div');
        newMessage.textContent = data.message.content;
        chatMessages.appendChild(newMessage);
      });

      // Send message
      chatForm.addEventListener('submit', function (e) {
        e.preventDefault();
        const message = messageInput.value;
        socket.emit('send_message', {
          fromUser: 'your_user_id',
          toUser: 'recipient_user_id',
          message: message,
          chatRoom: 'your_chat_room_id',
        });
        messageInput.value = '';
      });
    </script>
  </body>
</html>
